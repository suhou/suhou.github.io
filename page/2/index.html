<!DOCTYPE html>
<html>
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="utf-8">
  

  
  <title>su</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta property="og:type" content="website">
<meta property="og:title" content="su">
<meta property="og:url" content="http://yoursite.com/page/2/index.html">
<meta property="og:site_name" content="su">
<meta property="og:locale" content="zh-Hans">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="su">
  
    <link rel="alternate" href="/atom.xml" title="su" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
</head>
</html>
<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">su</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://yoursite.com"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main">
  
    <article id="post-ios中calayer的anchorpoint" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/07/01/ios中calayer的anchorpoint/" class="article-date">
  <time datetime="2016-07-01T03:06:45.000Z" itemprop="datePublished">2016-07-01</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/07/01/ios中calayer的anchorpoint/">iOS中CALayer的anchorPoint</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>看iOS核心动画高级技巧里面提到了frame,bounds,center等一堆属性，并且还有专门一节是anchorPoint，梳理下anchorPoint到底是什么。</p>
<h2 id="frame"><a href="#frame" class="headerlink" title="frame"></a>frame</h2><p>首先说说效果，layer里面的center叫做position，更改layer的position和anchorPoint都会对frame进行更改（其实更改的是frame的起点origional），但是更改position或者anchorPoint并不会影响另外一个的位置。所以先假设frame其实是根据position、anchorPoint等属性计算出来的一个属性好了。frame在文档中的说明是这样的。</p>
<blockquote>
<p>The frame rectangle is position and size of the layer specified in the superlayer’s coordinate space. For layers, the frame rectangle is a computed property that is derived from the values in the bounds, anchorPoint and position properties. When you assign a new value to this property, the layer changes its position and bounds properties to match the rectangle you specified. The values of each coordinate in the rectangle are measured in points.</p>
</blockquote>
<p>首先layer的frame是它在superlayer坐标系中的位置，frame是一个根据bounds,anchorPoint,position计算出来的computed property（还有transform，不考虑了就）,参考wonderffee大神的的博客frame的计算公式是：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">frame.origin.x = position.x - anchorPoint.x * bounds.size.width;</span><br><span class="line">frame.origin.y = position.y - anchorPoint.y * bounds.size.height;</span><br></pre></td></tr></table></figure>
<p>这就解释了为甚么anchorPoint设置(0,0)，整个view的frame会改变，往右下角移动。<br>贴代码看看效果</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">-(void)viewDidLoad&#123;</span><br><span class="line">    [super viewDidLoad];</span><br><span class="line">    UIImage *image = [UIImage imageNamed:@&quot;feicun.png&quot;];</span><br><span class="line">    UIImageView *imageView = [[UIImageView alloc] initWithFrame:CGRectMake(0, 0, 100, 100)];</span><br><span class="line">    [imageView setImage:image];</span><br><span class="line">    //默认情况下是(0.5, 0.5)</span><br><span class="line">//    imageView.layer.anchorPoint = CGPointMake(-0.5, -0.5);</span><br><span class="line">//    imageView.layer.position = CGPointMake(80, 80);</span><br><span class="line"></span><br><span class="line">    NSLog(@&quot;%@&quot;, NSStringFromCGPoint(imageView.layer.anchorPoint));</span><br><span class="line">    NSLog(@&quot;%@&quot;, NSStringFromCGPoint(imageView.layer.position));</span><br><span class="line">    NSLog(@&quot;%@&quot;, NSStringFromCGPoint(imageView.center));</span><br><span class="line">    [self.view addSubview:imageView];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>默认情况下的位置</p>
<p><img src="/pics/1.png" alt="默认情况" title="默认情况"></p>
<p>打开设置anchorpoint那行以后的样子</p>
<p><img src="/pics/2.png" alt="更改anchorPoint为(-0.5, -0.5)" title="更改anchorPoint为(-0.5, -0.5)"><br>可以看到frame的x和y有变化了</p>
<h2 id="anchorPoint"><a href="#anchorPoint" class="headerlink" title="anchorPoint"></a>anchorPoint</h2><p>通过frame我们可以对锚点得出一个直观的印象，首先这东西跟计算frame有关。</p>
<p>anchorpoint：锚点，船锚是用来固定船的，保证船的活动半径在⚓️周围，锚点也是这个意思。<br>anchorpoint就是view在做一些变换时的支点，比如旋转，平移，和缩放。<br>对于不同的锚点，同一个变换的到的效果也不同。<br>跑一下这段代码立马看到效果</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[UIView animateWithDuration:.5f animations:^&#123;</span><br><span class="line">        self.imageView.transform = CGAffineTransformRotate(self.imageView.transform, M_PI_2);</span><br><span class="line">    &#125;];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>其实很好理解吧对不对…</p>
<h2 id="position"><a href="#position" class="headerlink" title="position"></a>position</h2><p>position之前说了是跟view的center是同一个位置，一个layer的bounds是一个矩形，如果把这个矩形往中心无限缩小的话，缩到近似一个点，那个点就是position。</p>
<p>position默认是layer的中心，也就是跟center一样，代表的是该layer在superlayer中的位置。所以position用的也是绝对坐标系。</p>
<p>在上面的例子中改了anchorPoint对position是没有什么影响的，只影响了frame，对center也没有影响，就是frame变了…好啰嗦…</p>
<p>最后总结：position 用来设置CALayer在父层中的位置 </p>
<p>anchorPoint 决定着CALayer身上的哪个点会在position属性所指的位置</p>
<h1 id="参考链接"><a href="#参考链接" class="headerlink" title="参考链接"></a>参考链接</h1><p><a href="http://wonderffee.github.io/blog/2013/10/13/understand-anchorpoint-and-position/" target="_blank" rel="noopener">彻底理解position与anchorPoint</a></p>
<p><a href="https://zsisme.gitbooks.io/ios-/content/chapter3/anchor.html" target="_blank" rel="noopener">ios核心动画高级技巧</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2016/07/01/ios中calayer的anchorpoint/" data-id="cjw3k77vq0005fao33ms8h0sn" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-hello-world" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/06/24/hello-world/" class="article-date">
  <time datetime="2016-06-24T02:29:01.000Z" itemprop="datePublished">2016-06-24</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/06/24/hello-world/">Hello World</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>Welcome to <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/" target="_blank" rel="noopener">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html" target="_blank" rel="noopener">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues" target="_blank" rel="noopener">GitHub</a>.</p>
<h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">"My New Post"</span></span><br></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/writing.html" target="_blank" rel="noopener">Writing</a></p>
<h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/server.html" target="_blank" rel="noopener">Server</a></p>
<h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/generating.html" target="_blank" rel="noopener">Generating</a></p>
<h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/deployment.html" target="_blank" rel="noopener">Deployment</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2016/06/24/hello-world/" data-id="cjw3k77vn0003fao3631pep7z" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  


  <nav id="page-nav">
    
    <a class="extend prev" rel="prev" href="/">&laquo; Prev</a><a class="page-number" href="/">1</a><span class="page-number current">2</span>
  </nav>

</section>
        
          <aside id="sidebar">
  
    

  
    

  
    
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/05/">May 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/01/">January 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/09/">September 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/07/">July 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/03/">March 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/09/">September 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/07/">July 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/06/">June 2016</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2019/05/21/从一个crash体验strong的延迟释放/">从一个crash体验strong的延迟释放</a>
          </li>
        
          <li>
            <a href="/2019/05/14/从一个crash理解weak的延迟释放/">从一个crash理解weak的延迟释放</a>
          </li>
        
          <li>
            <a href="/2018/01/21/带着问题看源码----子线程AutoRelease对象何时释放/">带着问题看源码----子线程AutoRelease对象何时释放</a>
          </li>
        
          <li>
            <a href="/2018/01/17/带着问题读源码----KVO/">带着问题读源码----KVO</a>
          </li>
        
          <li>
            <a href="/2017/09/29/KVC原理小记/">KVC原理小记录</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2019 su<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>



  </div>
</body>
</html>